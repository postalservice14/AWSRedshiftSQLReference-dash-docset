<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <div></div><h1 class="topictitle" id="r_SVL_S3QUERY">SVL_S3QUERY</h1><p>Use the SVL_S3QUERY view to get details about Amazon Redshift Spectrum queries at
                        the segment and
                        node slice level.
                     </p><p>SVL_S3QUERY is visible to all users. Superusers can see all rows; regular users can
                        see only their own data. For more information, see <a href="https://docs.aws.amazon.com/redshift/latest/dg/c_visibility-of-data.html">Visibility of Data in System Tables and
                           Views</a>.
                     </p><h2 id="r_SVL_S3QUERY-table-columns">Table Columns</h2><div class="table">
                        <div class="table-contents">
                           <table id="w278aac43c15c75b7b3">
                              
                              <tr>
                                 
                                 <th>Column Name </th>
                                 
                                 <th>Data Type </th>
                                 
                                 <th>Description </th>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>userid</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The ID of user who generated a given
                                    entry.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>query</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The query ID.</td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>segment</td>
                                 
                                 <td>integer</td>
                                 
                                 
                                 <td>A segment number. A query consists of multiple
                                    segments, and each segment consists of one or more steps.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>step</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The query step that executed. </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>node</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The node number.</td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>slice</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The data slice that a particular segment executed
                                    against.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>starttime</td>
                                 
                                 <td>Time</td>
                                 
                                 <td>Time in UTC that the query started
                                    executing.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>endtime</td>
                                 
                                 <td>Time</td>
                                 
                                 <td>Time in UTC that the query execution
                                    completed
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>elapsed</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>Elapsed time (in microseconds).</td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>external_table_name</td>
                                 
                                 <td>char(136)</td>
                                 
                                 <td>Internal format of external table name for the s3
                                    scan step.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>is_partitioned</td>
                                 
                                 <td>char(1)</td>
                                 
                                 <td>If true (<strong class="userinput"><code>t</code></strong>), this column
                                    value indicates that the external table is partitioned.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>is_rrscan</td>
                                 
                                 <td>char(1)</td>
                                 
                                 <td>If true (<strong class="userinput"><code>t</code></strong>), this column
                                    value indicates that a range-restricted scan was applied.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>s3_scanned_rows</td>
                                 
                                 <td>long</td>
                                 
                                 <td>The number of rows scanned from Amazon S3 and sent to
                                    the Redshift Spectrum layer.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>s3_scanned_bytes</td>
                                 
                                 <td>long</td>
                                 
                                 <td>The number of bytes scanned from Amazon S3 and sent to
                                    the Redshift Spectrum layer.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>s3query_returned_rows</td>
                                 
                                 <td>long</td>
                                 
                                 <td>The number of rows returned from the Redshift
                                    Spectrum layer to the cluster.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>s3query_returned_bytes</td>
                                 
                                 <td>long</td>
                                 
                                 <td>The number of bytes returned from the Redshift
                                    Spectrum layer to the cluster.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>files</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The number of files that were processed for this
                                    S3 scan step on this slice.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>splits</td>
                                 
                                 <td>int</td>
                                 
                                 <td>The number of splits processed on this slice.
                                    With large splitable data files, for example, data files larger than
                                    about 512 MB, Redshift Spectrum tries to split the files into
                                    multiple S3 requests for parallel processing.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>total_split_size</td>
                                 
                                 <td>bigint</td>
                                 
                                 <td>The total size of all splits processed on this
                                    slice, in bytes.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>max_split_size</td>
                                 
                                 <td>bigint</td>
                                 
                                 <td>The maximum split size processed for this slice,
                                    in bytes.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>total_retries</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The total number of retries for the processed
                                    files.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>max_retries</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The maximum number of retries for an individual
                                    processed file.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>max_request_duration</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The maximum duration of an individual Redshift
                                    Spectrum request (in microseconds).
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>avg_request_duration</td>
                                 
                                 <td>double precision</td>
                                 
                                 <td>The average duration of the Redshift Spectrum
                                    requests (in microseconds).
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 
                                 <td>max_request_parallelism</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The maximum number of outstanding Redshift
                                    Spectrum on this slice for this S3 scan step.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 
                                 <td>avg_request_parallelism</td>
                                 
                                 <td>double precision</td>
                                 
                                 <td>The average number of parallel Redshift Spectrum
                                    requests on this slice for this S3 scan step.
                                 </td>
                                 
                              </tr>
                              
                              
                           </table>
                        </div>
                     </div><h2 id="r_SVL_S3QUERY-sample-query">Sample Query</h2><p>The following example gets the scan step details for the last query
                        executed.
                     </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">select query, segment, slice, elapsed, s3_scanned_rows, s3_scanned_bytes, s3query_returned_rows, s3query_returned_bytes, files 
from svl_s3query 
where query = pg_last_query_id() 
order by query,segment,slice;</code></pre><pre class="screen">query | segment | slice | elapsed | s3_scanned_rows | s3_scanned_bytes | s3query_returned_rows | s3query_returned_bytes | files
------+---------+-------+---------+-----------------+------------------+-----------------------+------------------------+------
 4587 |       2 |     0 |   67811 |               0 |                0 |                     0 |                      0 |     0
 4587 |       2 |     1 |  591568 |          172462 |         11260097 |                  8513 |                 170260 |     1
 4587 |       2 |     2 |  216849 |               0 |                0 |                     0 |                      0 |     0
 4587 |       2 |     3 |  216671 |               0 |                0 |                     0 |                      0 |     0</pre><div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div></div>
</body>
</html>