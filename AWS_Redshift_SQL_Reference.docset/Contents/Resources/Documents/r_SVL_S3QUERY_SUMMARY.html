<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <div></div><h1 class="topictitle" id="r_SVL_S3QUERY_SUMMARY">SVL_S3QUERY_SUMMARY</h1><p>Use the SVL_S3QUERY_SUMMARY view to get a summary of all Amazon Redshift Spectrum
                        queries (S3
                        queries) that have been run on the system. SVL_S3QUERY_SUMMARY aggregates detail from
                        SVL_S3QUERY at the segment level.
                     </p><p>SVL_S3QUERY_SUMMARY is visible to all users. Superusers can see all rows; regular
                        users can see only their own data. For more information, see <a href="https://docs.aws.amazon.com/redshift/latest/dg/c_visibility-of-data.html">Visibility of Data in System Tables and
                           Views</a>.
                     </p><h2 id="r_SVL_S3QUERY_SUMMARY-table-columns">Table Columns</h2><div class="table">
                        <div class="table-contents">
                           <table id="w278aac43c15c79b7b3">
                              
                              <tr>
                                 
                                 <th>Column Name </th>
                                 
                                 <th>Data Type </th>
                                 
                                 <th>Description </th>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>userid</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The ID of the user that generated the given
                                    entry.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>query</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The query ID. You can use this value to join
                                    various other system tables and views. 
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>xid</td>
                                 
                                 <td>long</td>
                                 
                                 <td>The transaction ID.</td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>pid</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The process ID.</td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>segment</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The segment number. A query consists of multiple
                                    segments, and each segment consists of one or more steps. 
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>step</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The query step that executed. </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>starttime</td>
                                 
                                 <td>timestamp</td>
                                 
                                 <td>Time in UTC that the query started
                                    executing.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>endtime</td>
                                 
                                 <td>timestamp</td>
                                 
                                 <td>Time in UTC that the query completed.</td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>elapsed</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The length of time that it took the query to
                                    execute (in microseconds).
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>aborted</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>If a query was aborted by the system or canceled
                                    by the user, this column contains <strong class="userinput"><code>1</code></strong>. If the
                                    query ran to completion, this column contains
                                    <strong class="userinput"><code>0</code></strong>.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>external_table_name</td>
                                 
                                 <td>char(136)</td>
                                 
                                 <td>The internal format of name of the external name
                                    of the table for the external table scan.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>file_format</td>
                                 
                                 <td>character(16)</td>
                                 
                                 <td>The file format of the external table data.</td>
                                 
                              </tr>                        
                              
                              <tr>
                                 
                                 <td>is_partitioned</td>
                                 
                                 <td>char(1)</td>
                                 
                                 <td>If true (<strong class="userinput"><code>t</code></strong>), this column
                                    value indicates that the external table is partitioned.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>is_rrscan</td>
                                 
                                 <td>char(1)</td>
                                 
                                 <td>If true (<strong class="userinput"><code>t</code></strong>), this column
                                    value indicates that a range-restricted scan was applied.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>is_nested</td>
                                 
                                 <td>varchar</td>
                                 
                                 <td>If true (<strong class="userinput"><code>t</code></strong>), this column
                                    value indicates that the nested column data type is accessed.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>s3_scanned_rows</td>
                                 
                                 <td>long</td>
                                 
                                 <td>The number of rows scanned from Amazon S3 and sent to
                                    the Redshift Spectrum layer.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>s3_scanned_bytes</td>
                                 
                                 <td>long</td>
                                 
                                 <td>The number of bytes scanned from Amazon S3 and sent to
                                    the Redshift Spectrum layer, based on compressed data.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>s3query_returned_rows</td>
                                 
                                 <td>long</td>
                                 
                                 <td>The number of rows returned from the Redshift
                                    Spectrum layer to the cluster.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>s3query_returned_bytes</td>
                                 
                                 <td>long</td>
                                 
                                 <td>The number of bytes returned from the Redshift
                                    Spectrum layer to the cluster. A large amount of data returned to
                                    Amazon Redshift might affect system performance.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>files</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The number of files that were processed for this
                                    Redshift Spectrum query. A small number of files limits the benefits
                                    of parallel processing. 
                                 </td>
                                 
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>files_max</td>
                                 
                                 <td>integer</td>
                                 
                                 
                                 <td>The maximum number of files processed on one
                                    slice.
                                 </td>
                                 
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>files_avg</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The average number of files processed on one
                                    slice.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>splits</td>
                                 
                                 <td>int</td>
                                 
                                 <td>The number of splits processed for this segment.
                                    The number of splits processed on this slice. With large splitable
                                    data files, for example, data files larger than about 512 MB,
                                    Redshift Spectrum tries to split the files into multiple S3 requests
                                    for parallel processing.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>splits_max</td>
                                 
                                 <td>int</td>
                                 
                                 <td>The maximum number of splits processed on this
                                    slice. 
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>splits_avg</td>
                                 
                                 <td>int</td>
                                 
                                 <td>The average number of splits processed on this
                                    slice.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>total_split_size</td>
                                 
                                 <td>bigint</td>
                                 
                                 <td>The total size of all splits processed.</td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>max_split_size</td>
                                 
                                 <td>bigint</td>
                                 
                                 <td>The maximum split size processed, in
                                    bytes.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>avg_split_size</td>
                                 
                                 <td>bigint</td>
                                 
                                 <td>The average split size processed, in
                                    bytes.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>total_retries</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The total number of retries for one individual
                                    processed file.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>max_retries</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The maximum number of retries for any of
                                    processed files.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>max_request_duration</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The maximum duration of an individual file
                                    request (in microseconds). Long running queries might indicate a
                                    bottleneck.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>avg_request_duration</td>
                                 
                                 <td>double precision</td>
                                 
                                 <td>The average duration of the file requests (in
                                    microseconds).
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>max_request_parallelism</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The maximum number of parallel requests at one
                                    slice for this Redshift Spectrum query.
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>avg_request_parallelism</td>
                                 
                                 <td>double precision</td>
                                 
                                 <td>The average number of parallel requests at one slice for this Redshift Spectrum query.
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>total_slowdown_count</td>
                                 
                                 <td>bigint</td>
                                 
                                 <td>The total number of Amazon S3 requests with a slow down error that occurred during
                                    the external table scan. 
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>max_slowdown_count</td>
                                 
                                 <td>integer</td>
                                 
                                 <td>The maximum number of Amazon S3 requests with a slow down error that occurred during
                                    the external table scan on one slice. 
                                 </td>
                                 
                              </tr>
                              
                              
                           </table>
                        </div>
                     </div><h2 id="r_SVL_S3QUERY_SUMMARY-sample-query">Sample Query</h2><p>The following example gets the scan step details for the last query
                        executed.
                     </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">select query, segment, elapsed, s3_scanned_rows, s3_scanned_bytes, s3query_returned_rows, s3query_returned_bytes, files 
from svl_s3query_summary 
where query = pg_last_query_id() 
order by query,segment;</code></pre><pre class="screen">query | segment | elapsed | s3_scanned_rows | s3_scanned_bytes | s3query_returned_rows | s3query_returned_bytes | files
------+---------+---------+-----------------+------------------+-----------------------+------------------------+------
 4587 |       2 |   67811 |               0 |                0 |                     0 |                      0 |     0
 4587 |       2 |  591568 |          172462 |         11260097 |                  8513 |                 170260 |     1
 4587 |       2 |  216849 |               0 |                0 |                     0 |                      0 |     0
 4587 |       2 |  216671 |               0 |                0 |                     0 |                      0 |     0</pre><div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div></div>
</body>
</html>